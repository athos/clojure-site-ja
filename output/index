<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>JBake</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="">JBake</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="feed.xml">Subscribe</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">
	<div class="page-header">
		<h1>Blog</h1>
	</div>
  			<a href="news/2011/07/22/introducing-clojurescript.html"><h1>Introducing ClojureScript</h1></a>
  			<p></p>
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Clojure team is proud to introduce an important addition to the Clojure
language ecosystem. <a href="https://github.com/clojure/clojurescript">ClojureScript</a>
is a new compiler for Clojure that targets JavaScript.</p>
</div>
<div class="paragraph">
<p>A <a href="https://www.youtube.com/watch?v=tVooR-dF_Ag">video recording of the
ClojureScript announcement</a> is available, along with
<a href="http://cloud.github.com/downloads/clojure/clojurescript/clojurescript%20slides.pdf">slides
(PDF) from the presentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_javascript">Why JavaScript</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Clojure language was first
<a href="xref/../../../../../about/rationale#Rationale-Languages%20and%20Platforms">built
on the Java Virtual Machine</a> because of its reach and power on server
platforms. For non-server platforms, nothing has greater reach than
JavaScript. It&#8217;s been called the
<a href="http://www.hanselman.com/blog/JavaScriptisAssemblyLanguagefortheWebPart2MadnessorjustInsanity.aspx">assembly
language of the Web</a>. But beyond Web browsers, JavaScript can be found in
<a href="http://arstechnica.com/apple/news/2011/06/ios-5-brings-nitro-speed-to-home-screen-web-apps.ars">mobile
devices</a>, <a href="http://developer.boxee.tv/JavaScript_API#Preface">set-top boxes</a>,
and
<a href="http://wiki.services.openoffice.org/wiki/Documentation/DevGuide/Scripting/Scripting_Framework">desktop
applications</a>. JavaScript has even made inroads on the server in
<a href="http://couchdb.apache.org/">databases</a> and <a href="http://nodejs.org/">Web
servers</a>. As a result of this reach, a lot of work has gone into making
JavaScript engines performant, including JIT-compilation into native code.</p>
</div>
<div class="paragraph">
<p>But JavaScript&#8217;s weakness remains the language itself. Although it has some
powerful features such as first-class functions, JavaScript is noted more
for its flaws than for its strengths. It was never designed to be a language
for large applications.</p>
</div>
<div class="paragraph">
<p>What if we had a modern, robust, powerful language that could reach to all
the places that JavaScript does? This is the goal of ClojureScript.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_where_we_are">Where We Are</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Try it out! Follow the Quick Start instructions on the
<a href="https://github.com/clojure/clojurescript/wiki">ClojureScript wiki</a>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a partial list of what has been implemented so far:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Protocols and <code>deftype</code></p>
</li>
<li>
<p>Namespaces</p>
</li>
<li>
<p>Functions: <code>fn</code>, <code>defn</code>, multiple-arities, variadics</p>
</li>
<li>
<p>Destructuring</p>
</li>
<li>
<p>Higher-order functions: <code>map</code>, <code>reduce</code>, <code>filter</code>, &#8230;&#8203;</p>
</li>
<li>
<p>Data structures: lists, maps, vectors, sets</p>
</li>
<li>
<p>Data manipulation functions: <code>conj</code>, <code>assoc</code>, <code>update-in</code>,&#8230;&#8203;</p>
</li>
<li>
<p>Sequences and sequence functions: <code>first</code>, <code>rest</code>, &#8230;&#8203;</p>
</li>
<li>
<p>Macros: <code>assert</code>, <code>cond</code>, <code>doto</code>, <code>loop</code>, <code>-&gt;</code> and <code>-&gt;&gt;</code>, &#8230;&#8203;</p>
</li>
<li>
<p>Metadata</p>
</li>
<li>
<p>Reader in ClojureScript (think JSON but better)</p>
</li>
<li>
<p>Regular expressions</p>
</li>
<li>
<p>Atoms</p>
</li>
<li>
<p>Core libraries: <code>clojure.string</code>, <code>clojure.set</code>, <code>clojure.zip</code>, &#8230;&#8203;</p>
</li>
<li>
<p>REPL using JDK-embedded JavaScript (Rhino)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ClojureScript is currently in Alpha status. The compiler and core libraries
are usable for developing applications, but expect to find bugs and missing
pieces of functionality. ClojureScript aims to be a complete implementation
of the Clojure language, but some parts aren&#8217;t finished yet.</p>
</div>
<div class="paragraph">
<p>Some parts of the Clojure language have no direct analog in ClojureScript,
in particular the concurrency primitives, since JavaScript is
single-threaded. There may also be edge cases where the requirements of the
JavaScript environment force ClojureScript to have slightly different
semantics from Clojure. We will document these differences as we find them.</p>
</div>
<div class="paragraph">
<p>Obviously, any code making interop calls to Java, as most existing Clojure
libraries do, will not work in ClojureScript. Code written in pure Clojure
will <strong>probably</strong> work in ClojureScript with minor adjustments. For example,
<a href="https://github.com/clojure/clojure/blob/master/src/clj/clojure/zip.clj">clojure.zip
in Clojure</a> and
<a href="https://github.com/clojure/clojurescript/blob/master/src/cljs/clojure/zip.cljs">clojure.zip
in ClojureScript</a> are nearly identical. With a little effort, purely
algorithmic code can be made portable between implementations. However,
trying to abstract over all the differences among host platforms has never
been a goal of Clojure, nor will it be a goal of ClojureScript.</p>
</div>
<div class="paragraph">
<p>We have a <a href="http://dev.clojure.org/jira/browse/CLJS">ClojureScript JIRA
instance</a> set up to track bugs. As with Clojure itself, submitting patches
requires signing the <a href="xref/../../../../../community/contributing">Clojure
Contributor Agreement</a>. We can only accept patches through JIRA, not GitHub
pull requests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_relationship_to_google_closure">The Relationship to Google Closure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Google has led the way in developing rich client-side applications in
JavaScript. Because Google needs the Web to succeed as an
application-delivery platform, they have released some of their JavaScript
tools as open source under the name <strong>Closure</strong>. The homophonic name clash
is unfortunate, but not something we can do anything about.</p>
</div>
<div class="paragraph">
<p><a href="http://code.google.com/closure/">Google Closure</a> is a suite of tools for
delivering complex JavaScript applications to memory-constrained devices
over slow connections. It consists of three parts: a large library of
JavaScript classes and functions, a client-side templating system, and an
optimizing JavaScript compiler. These parts are designed to work in
symbiosis.</p>
</div>
<div class="paragraph">
<p>The Google Closure compiler is a sophisticated JavaScript-to-JavaScript
compiler that performs whole-program analysis to inline and rearrange code
for optimal performance on modern JavaScript runtimes. Most importantly, it
eliminates unused or unreachable code. The Google Closure compiler makes it
possible to have a large library of JavaScript functions written in a
straightforward manner without concern for code size, and to deliver
minified versions of only the code your application needs. However, taking
full advantage of the Google Closure compiler requires adherence to strict
conventions for JavaScript source code.</p>
</div>
<div class="paragraph">
<p>The ClojureScript compiler emits JavaScript which follows Google Closure&#8217;s
code conventions, and then invokes the Google Closure compiler to generate
compact, optimized JavaScript for delivery to clients. ClojureScript also
makes use of the Google Closure library for capabilities such as event
handling, DOM manipulation, and user interface widgets.</p>
</div>
<div class="paragraph">
<p>It is possible to use ClojureScript with JavaScript libraries other than
Google Closure, but those libraries typically do not follow the conventions
of the Google Closure compiler and therefore will not be able to take full
advantage of its optimizations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_clojurescript_is_not">What ClojureScript is Not</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>ClojureScript is not Clojure implemented in JavaScript.</strong></p>
</div>
<div class="paragraph">
<p>The Clojure community has tried various ways of generating JavaScript from
Clojure in the past. One
<a href="https://github.com/clojure/clojure-contrib/tree/master/clojurescript">early
attempt by Chris Houser</a>, also called ClojureScript, used JavaScript as a
implementation language for the core data structures and compiler, the way
the current version of Clojure uses Java.</p>
</div>
<div class="paragraph">
<p>The new ClojureScript does not take this approach. Instead, ClojureScript is
written entirely in <strong>Clojure</strong>, as a compiler which emits JavaScript and a
large library of functions. Therefore, ClojureScript does not aim to provide
a complete development environment in JavaScript. There is no <code>eval</code> and no
runtime access to the ClojureScript compiler from within ClojureScript.</p>
</div>
<div class="paragraph">
<p><strong>ClojureScript is not JavaScript with Clojure syntax.</strong></p>
</div>
<div class="paragraph">
<p>Another approach sometimes used to overcome JavaScript&#8217;s syntactic
shortcomings is to layer another syntax on top of it while keeping all of
the JavaScript language
semantics. <a href="http://common-lisp.net/project/parenscript/">Parenscript</a> and
<a href="http://jashkenas.github.com/coffee-script/">CoffeeScript</a> are examples of
this approach.</p>
</div>
<div class="paragraph">
<p>ClojureScript has the same language semantics as Clojure, not
JavaScript. The ClojureScript compiler emits JavaScript, similar to the way
the Clojure compiler emits Java bytecode.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_we_got_here">How We Got Here</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ClojureScript was initially developed by Rich Hickey, creator of
Clojure. Members of the Clojure/core team, along with others invited from
the Clojure community, have participated in the development of the compiler.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_where_to_learn_more">Where to Learn More</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/clojure/clojurescript/wiki">ClojureScript Wiki</a></p>
</li>
<li>
<p><a href="http://groups.google.com/group/clojure">Clojure Mailing List</a></p>
</li>
<li>
<p>\#clojure IRC on <a href="http://freenode.net/">Freenode</a></p>
</li>
</ul>
</div>
</div>
</div></p>
  			<a href="news/2012/02/17/clojure-governance.html"><h1>Clojure Governance and How It Got That Way</h1></a>
  			<p></p>
  			<p><div class="sect1">
<h2 id="_enter_rich_with_parentheses">Enter Rich, with Parentheses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the beginning, there was a guy with an idea. That guy was Rich Hickey,
and his idea was to combine the power of Lisp with the reach of a modern
managed runtime. He started with <a href="http://jfli.sourceforge.net/">Jfli</a>,
embedding a JVM in Lispworks' Common Lisp implementation. When that proved
inadequate, he took a two-year sabbatical to write the compiler that would
eventually become <a href="http://clojure.org/">Clojure</a>: a completely new Lisp for
the JVM with language-level concurrency support.</p>
</div>
<div class="paragraph">
<p>In late 2007, Rich Hickey presented Clojure at a meeting of the New York
Lisp users' group, <a href="http://lispnyc.org/">LispNYC</a>. I was there, and I was so
excited by what I saw that I wrote one of the
<a href="http://stuartsierra.com/2007/11/15/clojure-a-lisp-worth-talking-about">first
blog articles about Clojure</a>. Three days later, I was asking questions about
Java interop on the <a href="http://groups.google.com/group/clojure">Clojure mailing
list</a>.</p>
</div>
<div class="paragraph">
<p>Those early days were fun, participating in heady discussions about
fundamental language features like
<a href="http://groups.google.com/group/clojure/browse_thread/thread/3a76a052b419d4d1/d57ae6ad6efb0d4e?#d57ae6ad6efb0d4e">nil
vs. false</a> and
<a href="http://groups.google.com/group/clojure/browse_thread/thread/8b2c8dc96b39ddd7/5237b9d3ab300df8">argument
order</a>. It felt like the beginning of something genuinely new. The community
was tiny, and Rich participated in almost every discussion on the mailing
list or IRC.</p>
</div>
<div class="paragraph">
<p>How times have changed. The Clojure mailing list has over five thousand
members, and we just wrapped up the <a href="http://clojure-conj.org/">second
international Clojure conference</a> with nearly four hundred attendees. Google
Groups tells me I&#8217;ve racked up over a thousand posts on the mailing list,
which is shocking to me. There are five books and counting about
Clojure. People are building businesses and careers on it. Who would have
guessed, in 2007, that we would be here in just four years?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enter_second_stuart">Enter Second Stuart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(That was a cheap shot. Hi, Stu! :)</p>
</div>
<div class="paragraph">
<p>In the Summer of 2008, Stuart Halloway started
<a href="http://thinkrelevance.com/blog/2008/07/30/clojure.html">blogging about
Clojure</a>. With his co-founder Justin Gehtland, Stuart H. had already
<a href="http://thinkrelevance.com/">built a business</a> helping big companies navigate
from ponderous Java development to more agile practices and more expressive
languages like Ruby. Stuart H. decided that Clojure was the
<a href="http://thinkrelevance.com/blog/2009/10/19/the-case-for-clojure.html">next big
thing</a>. He wrote the
<a href="http://pragprog.com/book/shcloj/programming-clojure">first book about
Clojure</a> (soon to get a
<a href="http://pragprog.com/book/shcloj2/programming-clojure">2nd edition</a>). When he
and Rich met at the 2008 JVM Language Summit, they started a long
conversation that would eventually become a partnership.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_clojure_contrib_the_beginning">Clojure Contrib: The Beginning</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Around the same mid-2008 time frame, "clojure-contrib" began its life as a
Subversion repository where community members could share code. There were
twelve committers and no rules, just a bunch of Clojure source files
containing code that we found useful. I contributed str-utils, seq-utils,
duck-streams, and later test-is.</p>
</div>
<div class="paragraph">
<p>The growth of contrib eventually led to the need for some kind of library
loading scheme more expressive than <code>load-file</code>. I wrote a primitive
<code>require</code> function that took a file name argument and loaded it from the
classpath. Steve Gilardi modified <code>require</code> to take a namespace symbol
instead of a file. I suggested <code>use</code> as the shortcut for the common case of
<code>require</code> followed by <code>refer</code>. This all happened fairly quickly, without a
lot of consideration or planning, culminating in the <code>ns</code> macro. The
peculiarities of the <code>ns</code> macro grew directly out of this work, so you can
blame us for that.</p>
</div>
<div class="paragraph">
<p>Clojure-contrib also prompted a question that every open-source software
project must grapple with: how to handle ownership. We&#8217;d already
<a href="http://groups.google.com/group/clojure/browse_thread/thread/4eea23108b2ed46e/e69c92cd7be8826a">gone
through two licenses</a>: the Common Public License and its successor, the
Eclipse Public License.</p>
</div>
<div class="paragraph">
<p>Rich
<a href="http://groups.google.com/group/clojure/browse_thread/thread/6de5840e5ab9abdf/306f63a87d34e5f1">proposed
a Clojure Contributor Agreement</a> as a means to protect Clojure&#8217;s future. The
motivation for the CA was to make sure Clojure would always be open-source
but never trapped by a particular license. The Clojure CA is a covenant
between the contributor and Rich Hickey: the contributor assigns joint
ownership of his contributions to Rich. In return, Rich promises that
Clojure will always be available under an open-source license approved by
the <a href="http://www.fsf.org/">FSF</a> or the <a href="http://www.opensource.org/">OSI</a>.</p>
</div>
<div class="paragraph">
<p>Some open-source projects got stuck with the first license under which
contributions were made. Under the CA, if the license ever needs to change
again, there would be no obstacles and no need to get permission from every
past contributor. Agreements like this have become standard practice for
owners of large open-source projects like
<a href="http://www.eclipse.org/legal/committer_process/EclipseIndividualCommitterAgreementFinal.pdf">Eclipse</a>,
<a href="http://www.apache.org/licenses/icla.txt">Apache</a>, and
<a href="http://www.oracle.com/technetwork/community/oca-486395.html">Oracle</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_clojure_core_and_new_contrib">Clojure/core and "New Contrib"</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In 2010 I left my cozy academic job and went to work for Relevance, where
Stuart Halloway and Rich were discussing a strategic partnership that would
eventually become <a href="http://clojure.com/">Clojure/core</a>. So what is
Clojure/core? It&#8217;s a business initiative of Relevance (though not an
independent business entity) to provide consulting, training, and
development-for-hire services around Clojure. Rich Hickey is an advisor to
Clojure/core, but not a Relevance employee.</p>
</div>
<div class="paragraph">
<p>Members of Clojure/core, of which I am one, have made a commitment to spend
their <a href="http://thinkrelevance.com/blog/2011/08/01/Friday-Update.html">20% time</a>
supporting the Clojure ecosystem. Although Rich still personally reviews
every patch for the language itself, the job of answering questions and
organizing contributions from a 5000-member community is too big for one
person, so Rich delegated that responsibility to Clojure/core.</p>
</div>
<div class="paragraph">
<p>The first big issue Clojure/core had to confront was the distribution of
clojure-contrib. With sixty-plus libraries in one binary release, it was
already unwieldy. Since clojure-contrib releases were tied to Clojure
language releases, which happened infrequently, development had
stalled. There was also vast confusion about what, exactly, clojure-contrib
was meant to be. Was it an essential component of the language, a nascent
standard library, or a load of crap? (I was inclined to the latter view,
especially with regard to my own contributions.)</p>
</div>
<div class="paragraph">
<p>My attempts at
<a href="https://github.com/clojure/clojure-contrib/commit/a6a92b9b3d2bfd9a56e1e5e9cfba706d1aeeaae5">modularizing
clojure-contrib within a single Git repository</a> failed to improve the
situation. Eventually, we settled on the solution of separate Git
repositories for each library. This was a huge amount of work: dozens of
repositories to create and hundreds of files to move. Many of the contrib
libraries were stagnant, their original authors lacking time to continue
working on them.</p>
</div>
<div class="paragraph">
<p>Finally, almost a year later, the situation has stabilized:
<a href="http://dev.clojure.org/display/doc/Clojure%2BContrib">28 libraries</a>, each
with its own Git repository, test suite,
<a href="http://build.clojure.org/">continuous integration</a>, and independent release
cycle. The overall code quality is higher and development is moving forward
again.</p>
</div>
<div class="paragraph">
<p>It was a painful transition for everyone, not least for those of us trying
to manage it all and bear the brunt of the inevitable carping. On top of
everything else, the whole process overlapped with the release of Clojure
1.3, the first release to break backwards-compatibility in noticeable ways
(non-dynamic Vars as a default, long/double as default numeric types).</p>
</div>
<div class="paragraph">
<p>Our technology choices for Clojure and "new contrib" — GitHub, JIRA, Hudson,
and Maven — were driven by several concerns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to be first-class participants in the Java ecosystem</p>
</li>
<li>
<p>to preserve the future-proof licensing structure of the CA</p>
</li>
<li>
<p>to give library developers freedom to develop/release on their own schedule</p>
</li>
<li>
<p>to ensure changes are made only after a thorough review process</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last point was particularly important for patches to the Clojure
language. Clojure is <strong>very</strong> stable: since its first public release,
implementation bugs have been rare and regressions almost nonexistent. Most
reported bugs are edge cases in Java interop. But stability has a price: new
features come more slowly. The majority of JIRA tickets on Clojure are
really feature requests. Rich is extremely conservative about adding
features to the language, and he has impressed this view on Clojure/core for
the purpose of screening tickets.</p>
</div>
<div class="paragraph">
<p>To take one prominent example,
<a href="http://groups.google.com/group/clojure/browse_thread/thread/aa57ab265f7474a/51bb53ca077154f8">named
arguments were discussed</a> as far back as January 2008. Community members
developed the
<a href="http://groups.google.com/group/clojure/browse_thread/thread/d4f5f04f6894c741/4d3051dc6604df5d">defnk
macro</a> to facilitate writing functions with named arguments, and
<a href="http://groups.google.com/group/clojure/browse_thread/thread/de791a1a28659ea/6020c7db6bb74844">lobbied
to add it</a> to Clojure. Finally, in March 2010, Rich made a
<a href="https://github.com/clojure/clojure/commit/29389970bcd41998359681d9a4a20ee391a1e07c">one-line
commit</a> adding support for map destructuring from sequential
collections. This gave the benefit of keyword-style parameters everywhere
destructuring is supported, including function arguments. By waiting, and
thinking, we got something better than defnk. If defnk had been accepted
earlier, we might have been stuck with an inferior implementation.</p>
</div>
<div class="paragraph">
<p>Conversely, the decision to move some libraries into the language, notably
my testing library, was probably premature. (Stuart Halloway accepts blame
for that one. :) Some of the decisions I made in that library could use
revisiting, but now clojure.test is what we&#8217;re stuck with.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_clojure_dev_and_the_future">Clojure/dev and the Future</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If there was one mistake that I personally made during the 1.3 migration, it
was speaking as if Clojure/core <strong>owned</strong> Clojure and clojure-contrib. We
don&#8217;t: Clojure is owned by Rich Hickey, and clojure-contrib is owned jointly
by Rich Hickey and contributors. But we <strong>are</strong> the appointed stewards (and
Stuarts!) of the open-source Clojure ecosystem. In that role, we have to
make decisions about what we choose to invest time in supporting. Given
limited time, and following Rich&#8217;s conservative position on new features,
that decision is usually "no."</p>
</div>
<div class="paragraph">
<p>It&#8217;s a difficult position to be in. Most of Clojure/core&#8217;s members come from
the free-wheeling, fast-paced open-source world of Ruby on Rails. We really
don&#8217;t enjoy saying "no" all the time. But a conservative attitude toward new
features is exactly the reason Clojure is so stable. Patches don&#8217;t get into
the language until they have been
<a href="http://dev.clojure.org/display/design/JIRA%2Bworkflow">reviewed by at least
three people</a>, one of them Rich Hickey. New libraries don&#8217;t get added to
<a href="http://dev.clojure.org/display/design/Clojure%2BContrib">clojure-contrib</a>
without multiple mailing-list discussions. None of the new contrib libraries
has reached the
<a href="http://dev.clojure.org/display/design/Contrib%2B1.0.0%2BReleases">1.0.0
milestone</a>, and probably won&#8217;t for some time. These hurdles are not
arbitrary; they are an attempt to guarantee that new additions to Clojure
reflect the same consideration and careful design that Rich invested in the
original implementation.</p>
</div>
<div class="paragraph">
<p>So what is clojure-contrib today? It&#8217;s a curated set of libraries whose
ownership and licensing is governed by the Clojure Contributor Agreement. It
could also serve as a proving ground for new features in the language, but
this does not imply that every contrib library will eventually make it into
the language.</p>
</div>
<div class="paragraph">
<p>With the expansion of contrib, we&#8217;ve given name to another layer of
organization: <strong>Clojure/dev</strong>. Clojure/dev is the set of all people who have
signed the Clojure Contributor Agreement. This entitles them to participate
in discussions on the <a href="http://groups.google.com/group/clojure-dev">clojure-dev
mailing list</a>, submit patches on <a href="http://dev.clojure.org/jira">JIRA</a>, and
become committers on contrib libraries. Within Clojure/dev is the smaller
set of people who have been tasked with screening Clojure language
tickets. Clojure/core overlaps with both groups.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/content/news/2012-02-17/clojure-community-layers.png" alt="Diagram showing layers of the Clojure community">
</div>
</div>
<div class="paragraph">
<p>At the tail end of this year&#8217;s <a href="http://clojure-conj.org/">Clojure/conj</a>,
Stuart Halloway opened the first face-to-face meeting of Clojure/dev with
these words: "This is the Clojure/dev meeting. It&#8217;s a meeting of volunteers
talking about how they&#8217;re going to spend their free time. The only thing we
owe each other is honest communication about when we&#8217;re planning to do
something and when we&#8217;re not. There is no obligation for anybody in this
room to build anything for anybody else."</p>
</div>
<div class="paragraph">
<p>One consensus that came out of the Clojure/dev meeting was that we need to
get better at using our tools, particularly JIRA. We would like to
streamline the processes of joining Clojure/dev, screening patches, and
creating new contrib libraries. We also need better integration testing
between Clojure and applications that use it. Application and library
developers can help by running their test suites against pre-release
versions of Clojure (alphas, betas, even SNAPSHOTs) and reporting problems
early.</p>
</div>
<div class="paragraph">
<p>But Stu&#8217;s last point is an important one: no one in the Clojure community
owes anybody anything. If you want something, it&#8217;s not enough to ask for it,
you need to be willing to do the work to make it happen. At the same time,
don&#8217;t let a lukewarm response to ideas on the mailing list dissuade you from
implementing something you think is valuable. It might just be that no one
has time to think about it. Recall keyword arguments: more than two years
from inception to completion. We&#8217;re in this for the long haul. Join us, be
patient, and let&#8217;s see where we can go.</p>
</div>
</div>
</div></p>
  			<a href="news/2013/06/28/clojure-clore-async-channels.html"><h1>Clojure core.async Channels</h1></a>
  			<p></p>
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/clojure/core.async">core.async</a> is a new contrib library
for Clojure that adds support for asynchronous programming using channels.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rationale">Rationale</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There comes a time in all good programs when components or subsystems must
stop communicating directly with one another. This is often achieved via the
introduction of queues between the producers of data and the
consumers/processors of that data. This architectural indirection ensures
that important decisions can be made with some degree of independence, and
leads to systems that are easier to understand, manage, monitor and change,
and make better use of computational resources, etc.</p>
</div>
<div class="paragraph">
<p>On the JVM, the
<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html">java.util.concurrent</a>
package provides some good concurrent blocking queues, and they are a viable
and popular choice for Clojure programs. However, in order to use the queues
one must dedicate one or more actual threads to their
consumption. Per-thread stack allocation and task-switching overheads limit
the number of threads that can be used in practice. Another limitation of
j.u.c. queues is there is no way to block waiting on a set of alternatives.</p>
</div>
<div class="paragraph">
<p>On JavaScript engines, there are no threads and no queues.</p>
</div>
<div class="paragraph">
<p>Thread overheads or lack of threads often cause people to move to systems
based upon events/callbacks, in the pursuit of greater efficiency (often
under the misnomer 'scalability', which doesn&#8217;t apply since you can&#8217;t scale
a single machine). Events complect communication and flow of control. While
there are various mechanisms to make events/callbacks cleaner (FRP,
Rx/Observables) they don&#8217;t change their fundamental nature, which is that
upon an event an arbitrary amount of other code is run, possibly on the same
thread, leading to admonitions such as "don&#8217;t do too much work in your
handler", and phrases like "callback hell".</p>
</div>
<div class="paragraph">
<p>The objectives of core.async are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To provide facilities for independent threads of activity, communicating via
queue-like <em>channels</em></p>
</li>
<li>
<p>To support both real threads and shared use of thread pools (in any
combination), as well as ClojureScript on JS engines</p>
</li>
<li>
<p>To build upon the work done on CSP and its derivatives</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is our hope that async channels will greatly simplify efficient
server-side Clojure programs, and offer simpler and more robust techniques
for front-end programming in ClojureScript.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_history">History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The roots of this style go back at least as far as
<a href="http://en.wikipedia.org/wiki/Communicating_sequential_processes">Hoare&#8217;s
Communicating Sequential Processes (CSP)</a>, followed by realizations and
extensions in
e.g. <a href="http://en.wikipedia.org/wiki/Occam_programming_language">occam</a>,
<a href="http://www.cs.kent.ac.uk/projects/ofa/jcsp/">Java CSP</a> and the
<a href="http://golang.org/">Go programming language</a>.</p>
</div>
<div class="paragraph">
<p>In modern incarnations, the notion of a channel becomes first class, and in
doing so provides us the indirection and independence we seek.</p>
</div>
<div class="paragraph">
<p>A key characteristic of channels is that they are blocking. In the most
primitive form, an unbuffered channel acts as a rendezvous, any reader will
await a writer and vice-versa. Buffering can be introduced, but unbounded
buffering is discouraged, as bounded buffering with blocking can be an
important tool coordinating pacing and back pressure, ensuring a system
doesn&#8217;t take on more work than it can achieve.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_details">Details</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_just_a_library">Just a library</h3>
<div class="paragraph">
<p><strong>core.async</strong> is a library. It doesn&#8217;t modify Clojure. It is designed to support Clojure 1.5+.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_channels">Creating channels</h3>
<div class="paragraph">
<p>You can create a channel with the
<a href="http://clojure.github.io/core.async/#clojure.core.async/chan">chan</a>
function. This will return a channel that supports multiple writers and
readers. By default, the channel is unbuffered, but you can supply a number
to indicate a buffer size, or supply a buffer object created via
<a href="http://clojure.github.io/core.async/#clojure.core.async/buffer">buffer</a>,
<a href="http://clojure.github.io/core.async/#clojure.core.async/dropping-buffer">dropping-buffer</a>
or
<a href="http://clojure.github.io/core.async/#clojure.core.async/sliding-buffer">sliding-buffer</a>.</p>
</div>
<div class="paragraph">
<p>The fundamental operations on channels are putting and taking values. Both
of those operations potentially block, but the nature of the blocking
depends on the nature of the thread of control in which the operation is
performed. core.async supports two kinds of threads of control - ordinary
threads and IOC (inversion of control) 'threads'. Ordinary threads can be
created in any manner, but IOC threads are created via
<a href="http://clojure.github.io/core.async/#clojure.core.async/go">go
blocks</a>. Because JS does not have threads, only <code>go</code> blocks and IOC threads
are supported in ClojureScript.</p>
</div>
</div>
<div class="sect2">
<h3 id="_go_blocks_and_ioc_threads">go blocks and IOC 'threads'</h3>
<div class="paragraph">
<p><code>go</code> is a macro that takes its body and examines it for any channel
operations. It will turn the body into a state machine. Upon reaching any
blocking operation, the state machine will be 'parked' and the actual thread
of control will be released. This approach is similar to that used in
<a href="http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx">C#
async</a>. When the blocking operation completes, the code will be resumed (on
a thread-pool thread, or the sole thread in a JS VM). In this way the
inversion of control that normally leaks into the program itself with
event/callback systems is encapsulated by the mechanism, and you are left
with straightforward sequential code. It will also provide the illusion of
threads, and more important, separable sequential subsystems, to
ClojureScript.</p>
</div>
<div class="paragraph">
<p>The primary channel operations within go blocks are
<a href="http://clojure.github.io/core.async/#clojure.core.async/%3E!">&gt;!</a> (<em>put</em>) and
<a href="http://clojure.github.io/core.async/#clojure.core.async/&lt;!">&lt;!</a> (<em>take</em>). The
go block itself immediately returns a channel, on which it will eventually
put the value of the last expression of the body (if non-nil), and then
close.</p>
</div>
</div>
<div class="sect2">
<h3 id="_channel_on_ordinary_threads">Channel on ordinary threads</h3>
<div class="paragraph">
<p>There are analogous operations for use on ordinary threads -
<a href="http://clojure.github.io/core.async/#clojure.core.async/%3E!!">&gt;!!</a> (<em>put
blocking</em>) and
<a href="http://clojure.github.io/core.async/#clojure.core.async/&lt;!!">&lt;!!</a> (<em>take
blocking</em>), which will block the thread on which they are called, until
complete. While you can use these operations on threads created with
e.g. future, there is also a macro,
<a href="http://clojure.github.io/core.async/#clojure.core.async/thread">thread</a>,
analogous to <code>go</code>, that will launch a first-class thread and similarly
return a channel, and should be preferred over <code>future</code> for channel work.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mixing_modes">Mixing modes</h3>
<div class="paragraph">
<p>You can put on a channel from either flavor of <code>&gt;!</code>/<code>&gt;!!</code> and similarly take
with either of <code>&lt;!</code>/<code>&lt;&lt;!</code> in any combination, i.e. the channel is oblivious
to the nature of the threads which use it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_alt">alt</h3>
<div class="paragraph">
<p>It is often desirable to be able to wait for any one (and only one) of a set
of channel operations to complete. This powerful facility is made available
through the
<a href="http://clojure.github.io/core.async/#clojure.core.async/alts!">alts!</a>
function (for use in <code>go</code> blocks), and the analogous
<a href="http://clojure.github.io/core.async/#clojure.core.async/alts!!">alts!!</a>
(<em>alts blocking</em>). If more than one operation is available to complete, one
can be chosen at random or by priority (i.e. in the order they are
supplied). There are corresponding
<a href="http://clojure.github.io/core.async/#clojure.core.async/alt!">alt!</a> and
<a href="http://clojure.github.io/core.async/#clojure.core.async/alt!!">alt!!</a> macros
that combine the choice with conditional evaluation of expressions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_timeouts">Timeouts</h3>
<div class="paragraph">
<p>Timeouts are just channels that automatically close after a period of
time. You can create one with the
<a href="http://clojure.github.io/core.async/#clojure.core.async/timeout">timeout</a>
function, then just include the timeout in an <code>alt</code> variant. A nice aspect
of this is that timeouts can be shared between threads of control, e.g. in
order to have a set of activities share a bound.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_value_of_values">The value of values</h3>
<div class="paragraph">
<p>As with STM, the pervasive use of persistent data structures offers
particular benefits for CSP-style channels. In particular, it is always safe
and efficient to put a Clojure data structure on a channel, without fear of
its subsequent use by either the producer or consumer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_contrasting_go_language_channels">Contrasting Go language channels</h3>
<div class="paragraph">
<p>core.async has obvious similarities to Go channels. Some differences with Go
are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All of the operations are expressions (not statements)</p>
</li>
<li>
<p>This is a library, not syntax</p>
</li>
<li>
<p><code>alts!</code> is a function (and supports a runtime-variable number of operations)</p>
</li>
<li>
<p>Priority is supported in <code>alt</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, Clojure is hosted, i.e. we are bringing these facilities to
existing platforms, not needing a custom runtime. The flip-side is we don&#8217;t
have the underpinnings we would with a custom runtime. Reaching existing
platforms remains a core Clojure value proposition.</p>
</div>
</div>
<div class="sect2">
<h3 id="_whither_actors">Whither actors?</h3>
<div class="paragraph">
<p>I remain unenthusiastic about actors. They still couple the producer with
the consumer. Yes, one can emulate or implement certain kinds of queues with
actors (and, notably, people often do), but since any actor mechanism
already incorporates a queue, it seems evident that queues are more
primitive. It should be noted that Clojure&#8217;s mechanisms for concurrent use
of state remain viable, and channels are oriented towards the flow aspects
of a system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_deadlocks">Deadlocks</h3>
<div class="paragraph">
<p>Note that, unlike other Clojure concurrency constructs, channels, like all
communications, are subject to deadlocks, the simplest being waiting for a
message that will never arrive, which must be dealt with manually via
timeouts etc. CSP proper is amenable to certain kinds of automated
correctness analysis. No work has been done on that front for core.async as
yet.</p>
</div>
<div class="paragraph">
<p>Also note that async channels are not intended for fine-grained
computational parallelism, though you might see examples in that vein.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_future_directions">Future directions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Networks channels and distribution are interesting areas for attention. We
will also being doing performance tuning and refining the APIs.</p>
</div>
<div class="sect2">
<h3 id="_team">Team</h3>
<div class="paragraph">
<p>I&#8217;d like to thank the team that helped bring core.async to life:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Timothy Baldridge</p>
</li>
<li>
<p>Ghadi Shayban</p>
</li>
<li>
<p>Alex Miller</p>
</li>
<li>
<p>Alex Redington</p>
</li>
<li>
<p>Sam Umbach</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And once again, Tom Faulhaber for his work on autodoc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status">Status</h3>
<div class="paragraph">
<p>While the library is still in an early state , we are ready for people to
start trying it out and giving us feedback. The CLJS port is still work in
progress. Please have a look at the
<a href="https://github.com/clojure/core.async/tree/master/examples">examples</a>, which
we will expand over time.</p>
</div>
<div class="paragraph">
<p>It should be noted that the protocols behind the implementation should still
be considered an implementation detail for the time being, until we finish
our exploratory work around network channels, which might impact their
design.</p>
</div>
<div class="paragraph">
<p>I hope that these async channels will help you build simpler and more robust
programs.</p>
</div>
<div class="paragraph">
<p>Rich</p>
</div>
</div>
</div>
</div></p>
  			<a href="news/2014/08/06/transducers-are-coming.html"><h1>Transducers are Coming</h1></a>
  			<p></p>
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Transducers are a powerful and composable way to build algorithmic
transformations that you can reuse in many contexts, and they&#8217;re coming to
Clojure core and core.async.</p>
</div>
<div class="paragraph">
<p>Two years ago, in a
<a href="http://clojure.com/blog/2012/05/15/anatomy-of-reducer.html">blog post
describing how reducers work</a>, I described the reducing function
transformers on which they were based, and provided explicit examples like
<code>mapping</code>, <code>filtering</code> and <code>mapcatting</code>. Because the reducers library
intends to deliver an API with the same 'shape' as existing sequence
function APIs, these transformers were never exposed a la carte, instead
being encapsulated by the macrology of reducers.</p>
</div>
<div class="paragraph">
<p>In working recently on providing algorithmic combinators for core.async, I
became more and more convinced of the superiority of reducing function
transformers over channel&#8594;channel functions for algorithmic
transformation. In fact, I think they are a better way to do many things for
which we normally create bespoke replicas of map, filter etc.</p>
</div>
<div class="paragraph">
<p>So, reducing function transformers are getting a name - <strong>transducers</strong>, and
first-class support in Clojure core and core.async.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_s_a_transducer">What&#8217;s a Transducer?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To recap that earlier post:</p>
</div>
<div class="paragraph">
<p>A reducing function is just the kind of function you&#8217;d pass to <code>reduce</code> - it
takes a result so far and a new input and returns the next result-so-far. In
the context of transducers it&#8217;s best to think about this most generally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>;;reducing function signature
whatever, input -&gt; whatever</code></pre>
</div>
</div>
<div class="paragraph">
<p>and a transducer is a function that takes one reducing function and returns
another:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">;;transducer signature
(whatever, input -&gt; whatever) -&gt; (whatever, input -&gt; whatever)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The primary power of transducers comes from their fundamental decoupling -
they don&#8217;t care (or know about):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the 'job' being done (what the reducing function does)</p>
</li>
<li>
<p>the context of use (what 'whatever' is)</p>
</li>
<li>
<p>the source of inputs (where input comes from).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The other source of power comes from the fact that transducers compose using
ordinary function composition.</p>
</div>
<div class="paragraph">
<p>The reducers library leverages transducers' decoupling from the job, the
representation, and the source of inputs to accomplish parallel
reduction. But transducers can also be used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a la carte laziness</p>
</li>
<li>
<p>transformations during collection building</p>
</li>
<li>
<p>collection/iteration/laziness-free transforming reductions</p>
</li>
<li>
<p>channel transformations, event notifications and more.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of this is coming to Clojure core and core.async.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_stuff">New stuff</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Concretely, most of the core sequence functions are gaining a new arity, one
shorter than their current shortest, which elides the final collection
source argument. This arity will return a transducer that represents the
same logic, independent of lazy sequence processing.</p>
</div>
<div class="paragraph">
<p>Thus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">;;look Ma, no collection!
(map f)</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns a 'mapping' transducer. filter et al get similar support.</p>
</div>
<div class="paragraph">
<p>You can build a 'stack' of transducers using ordinary function composition
(comp):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(def xform (comp (map inc) (filter even?)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might notice the similarity between the above comp and a call to &#8594;&gt;:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-clojure" data-lang="clojure">(-&gt;&gt; aseq (map inc) (filter even?))</code></pre>
</div>
</div>
<div class="paragraph">
<p>One way to think of transducers is like &#8594;&gt; but independent of the job (lazy
sequence creation) and the source of inputs (aseq).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transducers_in_action">Transducers in action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you&#8217;ve got a transducer, what can you do with it? <em><strong>An open set of
things.</strong></em></p>
</div>
<div class="paragraph">
<p>For instance, given the above transducer and some data in a vector, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lazily transform the data (one lazy sequence, not three as with composed
sequence functions)<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(sequence xform data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>reduce with a transformation (no laziness, just a loop)<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(transduce xform + 0 data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>build one collection from a transformation of another, again no laziness<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(into [] xform data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>create a recipe for a transformation, which can be subsequently sequenced,
iterated or reduced<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(iteration xform data)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>or use the same transducer to transform everything that goes through a
channel<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>(chan 1 xform)</pre>
</div>
</div>
<div class="paragraph">
<p>The latter demonstrates the corresponding new capability of core.async
channels - they can take transducers.</p>
</div>
<div class="paragraph">
<p>This post is just to serve as a heads up on what the ongoing work is
about. There will be more explanations, tutorials and derivations to follow,
here and elsewhere.</p>
</div>
<div class="paragraph">
<p>I&#8217;m excited about transducers and the power they bring, and I hope you are
too!</p>
</div>
<div class="paragraph">
<p>Rich</p>
</div>
</div>
</div></p>
  			<a href="news/2015/06/30/clojure-17.html"><h1>Clojure 1.7 is now available</h1></a>
  			<p></p>
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We are pleased to announce the release of Clojure 1.7. The two headline
features for 1.7 are transducers and reader conditionals. Also see the
<a href="https://github.com/clojure/clojure/blob/master/changes.md">complete list</a> of
all changes since Clojure 1.6 for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transducers">Transducers</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="xref/../../../../../../reference/transducers">Transducers</a> are composable
algorithmic transformations. They are independent from the context of their
input and output sources and specify only the essence of the transformation
in terms of an individual element. Because transducers are decoupled from
input or output sources, they can be used in many different processes -
collections, streams, channels, observables, etc. Transducers compose
directly, without awareness of input or creation of intermediate aggregates.</p>
</div>
<div class="paragraph">
<p>Many existing sequence functions now have a new arity (one fewer argument
than before). This arity will return a transducer that represents the same
logic but is independent of lazy sequence processing. Functions included
are: map, mapcat, filter, remove, take, take-while, drop, drop-while,
take-nth, replace, partition-by, partition-all, keep, keep-indexed,
map-indexed, distinct, and interpose. Additionally some new transducer
functions have been added: cat, dedupe, and random-sample.</p>
</div>
<div class="paragraph">
<p>Transducers can be used in several new or existing contexts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>into - to collect the results of applying a transducer</p>
</li>
<li>
<p>sequence - to incrementally compute the result of a transducer</p>
</li>
<li>
<p>transduce - to immediately compute the result of a transducer</p>
</li>
<li>
<p>eduction - to delay computation and recompute each time</p>
</li>
<li>
<p>core.async - to apply a transducer while values traverse a channel</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_portable_clojure_and_reader_conditionals">Portable Clojure and Reader Conditionals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is now common to see a library or application targeting multiple Clojure
platforms with a single codebase. Clojure 1.7 introduces a new extension
(.cljc) for files that can be loaded by Clojure and ClojureScript (and other
Clojure platforms).</p>
</div>
<div class="paragraph">
<p>There will often be some parts of the code that vary between platforms. The
primary mechanism for dealing with platform-specific code is to isolate that
code into a minimal set of namespaces and then provide platform-specific
versions (.clj/.class or .cljs) of those namespaces.</p>
</div>
<div class="paragraph">
<p>To support cases where is not feasible to isolate the varying parts of the
code, or where the code is mostly portable with only small platform-specific
parts, 1.7 provides
<a href="xref/../../../../../../reference/reader#_reader_conditionals">Reader
Conditionals</a>.</p>
</div>
<div class="paragraph">
<p>Reader conditionals are a new reader form that is only allowed in portable
cljc files. A reader conditional expression is similar to a cond in that it
specifies alternating platform identifiers and expressions. Each platform is
checked in turn until a match is found and the expression is read. All
expressions not selected are read but skipped. A final :default fallthrough
can be provided. If no expressions are matched, the reader conditional will
read nothing. The reader conditional splicing form takes a sequential
expression and splices the result into the surrounding code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thanks to all of those who contributed patches to Clojure 1.7:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Timothy Baldridge</p>
</li>
<li>
<p>Bozhidar Batsov</p>
</li>
<li>
<p>Brandon Bloom</p>
</li>
<li>
<p>Michael Blume</p>
</li>
<li>
<p>Ambrose Bonnaire-Sergeant</p>
</li>
<li>
<p>Aaron Cohen</p>
</li>
<li>
<p>Pepijn de Vos</p>
</li>
<li>
<p>Andy Fingerhut</p>
</li>
<li>
<p>Gary Fredricks</p>
</li>
<li>
<p>Daniel Solano Gómez</p>
</li>
<li>
<p>Stuart Halloway</p>
</li>
<li>
<p>Rich Hickey</p>
</li>
<li>
<p>Immo Heikkinen</p>
</li>
<li>
<p>Andrei Kleschinsky</p>
</li>
<li>
<p>Howard Lewis Ship</p>
</li>
<li>
<p>Alex Miller</p>
</li>
<li>
<p>Steve Miner</p>
</li>
<li>
<p>Nicola Mometto</p>
</li>
<li>
<p>Tomasz Nurkiewicz</p>
</li>
<li>
<p>Ghadi Shayban</p>
</li>
<li>
<p>Paul Stadig</p>
</li>
<li>
<p>Zach Tellman</p>
</li>
<li>
<p>Luke VanderHart</p>
</li>
<li>
<p>Jozef Wagner</p>
</li>
<li>
<p>Devin Walters</p>
</li>
<li>
<p>Jason Wolfe</p>
</li>
<li>
<p>Steven Yi</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also, continued thanks to the total list of contributors from all releases.</p>
</div>
</div>
</div></p>
  			<a href="news/2016/01/14/clojure-org-live.html"><h1>Welcome to the new clojure.org!</h1></a>
  			<p></p>
  			<p><div class="paragraph">
<p>You are reading this on the newly updated Clojure web site! The first thing
you will notice is that everything got a fresh coat of paint and the design
is a big step forward. Essentially all of the old page content has been
moved over to the new site, however some things are in new locations - in
virtually all of those cases, you should find redirects taking you to the
new location.</p>
</div>
<div class="paragraph">
<p>There are also several new things on the site:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="xref/../../../../news">News</a> - periodically we will post topical news
here about new features, releases, or other things of note - these also
appear as links on the home page</p>
</li>
<li>
<p><a href="xref/../../../../../community/events">Events</a> - there is now a page for
each upcoming Clojure event, also with links on the home page</p>
</li>
<li>
<p><a href="xref/../../../../../guides">Guides</a> - a new section for building out
community guides and tutorials</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most importantly, all of the site content is stored in a
<a href="https://github.com/clojure/clojure-site">repository</a> and open for pull
requests from contributors with a signed contributor agreement. If you are
interested in adding or changing content, please check out the page on
<a href="xref/../../../../../community/contributing_site">site contributions</a> and
the current <a href="https://github.com/clojure/clojure-site/issues">issues</a> list.</p>
</div></p>
  			<a href="news/2016/01/19/clojure18.html"><h1>Clojure 1.8 is now available</h1></a>
  			<p></p>
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Some of the new features for 1.8 are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>More string functions in
<a href="http://clojure.github.io/clojure/branch-master/clojure.string-api.html">clojure.string</a>
(portable to ClojureScript): index-of, last-index-of, starts-with?,
ends-with?, includes?</p>
</li>
<li>
<p>Compiler <a href="xref/../../../../../reference/compilation#directlinking">direct
linking</a> - improves performance and startup time</p>
</li>
<li>
<p><a href="xref/../../../../../reference/repl_and_main#_launching_a_socket_server">Socket
server</a> and socket server REPL - adds the ability to allow remote Clojure
REPL connections</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see the
<a href="https://github.com/clojure/clojure/blob/master/changes.md">complete list</a> of
all changes since Clojure 1.7 for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributors">Contributors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thanks to all of those who contributed to Clojure 1.8 (first time
contributors in bold):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alexander Yakushev</strong></p>
</li>
<li>
<p>Alex Miller</p>
</li>
<li>
<p>Alex Redington</p>
</li>
<li>
<p>Alf Kristian Stoyle</p>
</li>
<li>
<p>Ambrose Bonnaire-Sergeant</p>
</li>
<li>
<p><strong>Andrew Rosa</strong></p>
</li>
<li>
<p>Andy Fingerhut</p>
</li>
<li>
<p><strong>Andy Sheldon</strong></p>
</li>
<li>
<p><strong>Aspasia Beneti</strong></p>
</li>
<li>
<p><strong>Blake West</strong></p>
</li>
<li>
<p>Bozhidar Batsov</p>
</li>
<li>
<p><strong>Daniel Compton</strong></p>
</li>
<li>
<p><strong>Erik Assum</strong></p>
</li>
<li>
<p>Gary Fredericks</p>
</li>
<li>
<p>Ghadi Shayban</p>
</li>
<li>
<p><strong>Gordon Syme</strong></p>
</li>
<li>
<p>Howard Lewis Ship</p>
</li>
<li>
<p><strong>Jean Niklas L&#8217;orange</strong></p>
</li>
<li>
<p><strong>Jeremy Heiler</strong></p>
</li>
<li>
<p><strong>Jonas Enlund</strong></p>
</li>
<li>
<p>Jozef Wagner</p>
</li>
<li>
<p>Karsten Schmidt</p>
</li>
<li>
<p>Kevin Downey</p>
</li>
<li>
<p><strong>Mark Simpson</strong></p>
</li>
<li>
<p>Michael Blume</p>
</li>
<li>
<p><strong>Nahuel Greco</strong></p>
</li>
<li>
<p>Nicola Mometto</p>
</li>
<li>
<p><strong>Nikita Prokopov</strong></p>
</li>
<li>
<p><strong>Nola Stowe</strong></p>
</li>
<li>
<p><strong>Ragnar Dahlén</strong></p>
</li>
<li>
<p><strong>Ralf Schmitt</strong></p>
</li>
<li>
<p>Rich Hickey</p>
</li>
<li>
<p><strong>Russ Olsen</strong></p>
</li>
<li>
<p><strong>Shogo Ohta</strong></p>
</li>
<li>
<p>Steve Miner</p>
</li>
<li>
<p>Stuart Halloway</p>
</li>
<li>
<p>Timothy Baldridge</p>
</li>
<li>
<p><strong>Tsutomu Yano</strong></p>
</li>
<li>
<p><strong>Yanxiang Lou</strong></p>
</li>
</ul>
</div>
</div>
</div></p>
  			<a href="news/2016/01/28/state-of-clojure-2015.html"><h1>State of Clojure 2015 survey results</h1></a>
  			<p></p>
  			<p><div class="paragraph">
<p>Check out the State of Clojure 2015 survey results here:</p>
</div>
<div class="paragraph">
<p><a href="http://blog.cognitect.com/blog/2016/1/28/state-of-clojure-2015-survey-results" class="bare">http://blog.cognitect.com/blog/2016/1/28/state-of-clojure-2015-survey-results</a></p>
</div>
<div class="paragraph">
<p>Thanks for responding - it&#8217;s great to see the community growing and doing
great things!</p>
</div></p>
  			<a href="news/2016/05/23/introducing-clojure-spec.html"><h1>Introducing clojure.spec</h1></a>
  			<p></p>
  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;m happy to introduce today <strong>clojure.spec</strong>, a new core library and
support for data and function specifications in Clojure.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_better_communication">Better Communication</h3>
<div class="paragraph">
<p>Clojure is a dynamic language, and thus far we have relied on documentation
or external libraries to explain the use and behavior of functions and
libraries. But documentation is difficult to produce, is frequently not
maintained, cannot be automatically checked and varies greatly in
quality. Specs are expressive and precise. Including <strong>spec</strong> in Clojure
creates a lingua franca with which we can state how our programs work and
how to use them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_more_leverage_and_power">More Leverage and Power</h3>
<div class="paragraph">
<p>A key advantage of specifications over documentation is the leverage they
provide. In particular, specs can be utilized by programs in ways that docs
cannot. Defining specs takes effort, and <strong>spec</strong> aims to maximize the
return you get from making that effort. <strong>spec</strong> gives you tools for
leveraging specs in documentation, validation, error reporting,
destructuring, instrumentation, test-data generation and generative testing.</p>
</div>
</div>
<div class="sect2">
<h3 id="_improved_developer_experience">Improved Developer Experience</h3>
<div class="paragraph">
<p>Error messages from macros are a perennial challenge for new (and
experienced) users of Clojure. Specs can be used to conform data in macros
instead of using a custom parser. And Clojure&#8217;s macro expansion will
automatically use specs, when present, to explain errors to users. This
should result in a greatly improved experience for users when errors occur.</p>
</div>
</div>
<div class="sect2">
<h3 id="_more_robust_software">More Robust Software</h3>
<div class="paragraph">
<p>Clojure has always been about simplifying the development of robust
software. In all languages, dynamic or not, tests are essential to quality -
too many critical properties are not captured by common type
systems. <strong>spec</strong> has been designed from the ground up to directly support
generative testing via
<a href="https://github.com/clojure/test.check">test.check</a>. When you use <strong>spec</strong> you
get generative tests for free.</p>
</div>
<div class="paragraph">
<p>Taken together, I think the features of <strong>spec</strong> demonstrate the ongoing
advantages of a powerful dynamic language like Clojure for building robust
software - superior expressivity, instrumentation-enhanced REPL-driven
development, sophisticated testing and more flexible systems. I encourage
you to read the <strong>spec</strong> <a href="http://clojure.org/about/spec">rationale and
overview</a>. Look for spec&#8217;s inclusion in the next alpha release of Clojure,
within a day or so.</p>
</div>
<div class="paragraph">
<p>I hope you find <strong>spec</strong> useful and powerful.</p>
</div>
<div class="paragraph">
<p>Rich</p>
</div>
</div></p>

	<hr />

	<p>Older posts are available in the <a href="archive.html">archive</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.5.0-SNAPSHOT</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    
  </body>
</html>